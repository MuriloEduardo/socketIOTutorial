<!DOCTYPE html>
<html>
<head>
    <style>
        body {}
        .roomsContainer {
            float:left;
            width:100px;
            border-right:1px solid black;
            height:300px;
            padding:10px;
            overflow:scroll-y;
        }
        .conversationContainer {
            float:left;
            width:300px;
            height:250px;
            overflow:scroll-y;
            padding:10px;
        }
        #data {

        }
    </style>
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
    <script>
        //Will be adding CHATROOM LOGIC HERE
        //We have Server Side funtions, now we need to add client side functions
        var socket = io.connect('http://localhost:3000');

        socket.on('connect', function() {
            socket.emit('addUser', prompt('What\'s your name?'))
        });

        socket.on('updateChat', function(username, data) {
            console.log(data);
            $('#conversation').append('<b>' + username + ':</b> ' + data + '<br>');
        })



        $(function() {
            $('#datasend').click(function () {
                var message = $('#data').val();

                $('#data').val('');
                $('#data').focus();

                socket.emit('sendChat', message);
            });

            $('#data').keypress(function(e) {
                if(e.which == 13) {
                    $(this).blur();

                    $('#datasend').focus().click();
                    //$('#data').focus();
                }
            })
        })
    </script>

</head>
<body>
<div class="roomsContainer">
	<b>ROOMS</b>
	<div id="rooms"></div>
</div>
<div class="conversationContainer">
	<div id="conversation"></div>
	<input id="data" style="width:200px;" />
	<input type="button" id="datasend" value="send" />
</div>
</body>
</html>
